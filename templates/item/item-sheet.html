<form class="{{cssClass}}" autocomplete="off">
    <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}"/>
        <div class="header-fields" style="margin-bottom: 5px">
            <h1 class="charname" style="font-family: Souvenir-Demi;"><input name="name" type="text" value="{{item.name}}" placeholder="Name"/></h1>
            <div class="row" style="flex-basis: auto;">
                <div class="col" style="flex: 1 1 auto;">
                    <label for="data.equip" style="font-family: Souvenir-Demi; font-size: 16px;">Inventory Slots</label>
                    <div class="row" style="flex-wrap: nowrap; align-items: center; padding-left: 0px;">
                        <select name="data.equip" id="itemCarriedDropdown" style="font-family: Souvenir-Medium;">
                            {{#select data.equip}}
                                {{#each data.equipOptions as |option key|}}
                                    {{#if option.value}}
                                <option name="data.equipOptions.{{key}}.value" value="{{option.value}}">{{option.value}}</option>
                                    {{/if}}
                                {{/each}}
                            {{/select}}
                        </select>
                        <span>&nbsp/&nbsp</span>
                        <input type="text" name="data.carried" value="{{data.carried}}" data-dtype="Number" style="font-family: Souvenir-Medium; height: 25px; width: 65px;"/>
                        <input type="text" name="data.slots" value="{{data.slots}}" data-dtype="Number" style="width: 30px; text-align: center; font-family: Souvenir-Medium; height: 25px;"/>
                    </div>
                </div>
                <!-- Cost -->
                <div class="col" style="flex-basis: 56px">
                    <label for="data.cost" style="font-family: Souvenir-Demi; font-size: 16px;">Cost</label>
                    <br>
                    <input type="text" name="data.cost" value="{{data.cost}}" data-dtype="String" style="width: 50px; height: 25px; font-family: Souvenir-Medium;"/>
                </div>
            </div>
            <div class="row" style="flex-basis: auto;">
                <div class="col" style="flex: 1 1 auto;">
                    <span style="font-family: Souvenir-Demi">Held in <input type="text" name="data.containerId" value="{{data.containerId}}" data-dtype="String" style="width: 200px; height: 25px; font-family: Souvenir-Medium;"/></span>
                </div>
            </div>
        </div>
    </header>

    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        {{#if data.capacity}}
        <a class="item" data-tab="inventory" style="font-family: Souvenir-Demi;">Inventory</a>
        {{/if}}
        <a class="item" data-tab="description" style="font-family: Souvenir-Demi;">Description</a>
        <a class="item" data-tab="attributes" style="font-family: Souvenir-Demi;">Attributes</a>
        <a class="item" data-tab="notes" style="font-family: Souvenir-Demi;">Notes</a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
        <!-- <hr style="border-top: 1px solid #AAA; border-bottom: none;"> -->

        {{#if data.capacity}}
        {{!-- Inventory Tab --}}
        <div class="tab" data-group="primary" data-tab="inventory" style="font-family: Souvenir-Medium;">
            <ol id="itemSlot" class="items-list col" style="margin: 0 3px 0 3px;">
                <li class="item flexrow item-header" id="itemSlotHeader">
                    <div class="item-image"></div>
                    <div class="item-name" style="font-family: Souvenir-Demi;">Container</div>
                    <div class="item-controls">
                        <a class="item-control item-create" title="Create item" data-type="item" type="Container"><i class="fas fa-plus"></i></a>
                    </div>
                </li>

                <!-- Placeholder <li> -->
                <div id="itemPlaceholder">
                    {{#times data.capacity}}
                    <li class="flexrow placeholder">
                        <h4 class="item-name" style="font-family: Souvenir-Medium;">[Pack]</h4>
                    </li>
                    {{/times}}
                </div>

                {{#each data.inventory as |item|}}
                    <script>
                        if (document.getElementById('itemPlaceholder') != null) {
                            if ({{item.data.slots}} === 1) {
                                document.getElementById('itemSlotHeader').insertAdjacentHTML("afterend", '<li class="item flexrow" data-item-id="{{item._id}}" data-item-type="{{item.equip}}"><div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div><h4 class="item-name" style="font-family: Souvenir-Medium;">{{item.name}}</h4><div class="item-controls"><a class="item-control item-edit" title="Edit Item" style="margin-right: 5px;"><i class="fas fa-edit"></i></a><a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a></div></li>');
                                document.getElementById('itemPlaceholder').firstElementChild.remove();
                            }
                        else {
                                document.getElementById('itemSlotHeader').insertAdjacentHTML("afterend", '<li class="item flexrow" data-item-id="{{item._id}}" data-item-type="{{item.equip}}"><div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div><h4 class="item-name" style="font-family: Souvenir-Medium;">{{item.name}}</h4><div class="item-controls"><a class="item-control item-edit" title="Edit Item" style="margin-right: 5px;"><i class="fas fa-edit"></i></a><a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a></div></li>');
                                for (i = 0; i < {{item.data.slots}}; i++) {
                                    document.getElementById('itemPlaceholder').firstElementChild.remove();
                                }
                            }
                        }
                    </script>
                {{/each}}
            </ol>
        </div>
        {{/if}}

        {{!-- Description Tab --}}
        <div class="tab" data-group="primary" data-tab="description" style="font-family: Souvenir-Medium;">
            <!-- <textarea name="data.description" value="{{data.description}}" data-dtype="String" style="font-family: Souvenir-Medium;" rows="12">{{data.description}}</textarea> -->
            <div style="margin-top: 5px;">
                {{editor content=data.description target="data.description" button=true owner=owner editable=editable}}
            </div>
        </div>

        {{!-- Attributes Tab --}}
        <div class="tab attributes" data-group="primary" data-tab="attributes" style="margin: 5px 5px 0 5px;">
            <label for="data.equipOptions.option1.value" style="font-family: Souvenir-Medium;">How can this item be carried?</label>
            <!-- Option 1 -->
            <div class="row" style="flex-wrap: nowrap; align-items: center; padding-left: 0px; margin: 3px 0 3px 0;">
                <select name="data.equipOptions.option1.value" style="font-family: Souvenir-Medium;">
                    {{#select data.equipOptions.option1.value}}
                    <option value="" disabled>Choose a slot...</option>
                    <option value="Head">Head</option>
                    <option value="Neck">Neck</option>
                    <option value="Hands (Worn)">Hands (Worn)</option>
                    <option value="Hands (Carried)">Hands (Carried)</option>
                    <option value="Feet">Feet</option>
                    <option value="Torso">Torso</option>
                    <option value="Belt">Belt</option>
                    <option value="Pocket">Pocket</option>
                    <option value="Pack">Pack</option>
                    <option value="Quiver">Quiver</option>
                    {{/select}}
                </select>
                <span style="font-family: Souvenir-Medium;">&nbsp/&nbsp</span>
                <select name="data.carryOptions.option1.value" style="font-family: Souvenir-Medium;">
                    {{#select data.carryOptions.option1.value}}
                    <option value="" disabled>...</option>
                    <option value="Worn">Worn</option>
                    <option value="Carried">Carried</option>
                    <option value="Pack">Pack</option>
                    <option value="Weapon">Weapon</option>
                    {{/select}}
                </select>
                <input type="text" name="data.slotOptions.option1.value" value="{{data.slotOptions.option1.value}}" data-dtype="Number" style="width: 30px; text-align: center; font-family: Souvenir-Medium; height: 25px;"/>
            </div>
            <!-- Option 2 -->
            <div class="row" style="flex-wrap: nowrap; align-items: center; padding-left: 0px; margin: 3px 0 3px 0;">
                <select name="data.equipOptions.option2.value" style="font-family: Souvenir-Medium;">
                    {{#select data.equipOptions.option2.value}}
                    <option value="" disabled>Choose a slot...</option>
                    <option value="Head">Head</option>
                    <option value="Neck">Neck</option>
                    <option value="Hands (Worn)">Hands (Worn)</option>
                    <option value="Hands (Carried)">Hands (Carried)</option>
                    <option value="Feet">Feet</option>
                    <option value="Torso">Torso</option>
                    <option value="Belt">Belt</option>
                    <option value="Pocket">Pocket</option>
                    <option value="Pack">Pack</option>
                    <option value="Quiver">Quiver</option>
                    {{/select}}
                </select>
                <span style="font-family: Souvenir-Medium;">&nbsp/&nbsp</span>
                <select name="data.carryOptions.option2.value" style="font-family: Souvenir-Medium;">
                    {{#select data.carryOptions.option2.value}}
                    <option value="" disabled>...</option>
                    <option value="Worn">Worn</option>
                    <option value="Carried">Carried</option>
                    <option value="Pack">Pack</option>
                    <option value="Weapon">Weapon</option>
                    {{/select}}
                </select>
                <input type="text" name="data.slotOptions.option2.value" value="{{data.slotOptions.option2.value}}" data-dtype="Number" style="width: 30px; text-align: center; font-family: Souvenir-Medium; height: 25px;"/>
            </div>
            <!-- Option 3 -->
            <div class="row" style="flex-wrap: nowrap; align-items: center; padding-left: 0px; margin: 3px 0 3px 0;">
                <select name="data.equipOptions.option3.value" style="font-family: Souvenir-Medium;">
                    {{#select data.equipOptions.option3.value}}
                    <option value="" disabled>Choose a slot...</option>
                    <option value="Head">Head</option>
                    <option value="Neck">Neck</option>
                    <option value="Hands (Worn)">Hands (Worn)</option>
                    <option value="Hands (Carried)">Hands (Carried)</option>
                    <option value="Feet">Feet</option>
                    <option value="Torso">Torso</option>
                    <option value="Belt">Belt</option>
                    <option value="Pocket">Pocket</option>
                    <option value="Pack">Pack</option>
                    <option value="Quiver">Quiver</option>
                    {{/select}}
                </select>
                <span style="font-family: Souvenir-Medium;">&nbsp/&nbsp</span>
                <select name="data.carryOptions.option3.value" style="font-family: Souvenir-Medium;">
                    {{#select data.carryOptions.option3.value}}
                    <option value="" disabled>...</option>
                    <option value="Worn">Worn</option>
                    <option value="Carried">Carried</option>
                    <option value="Pack">Pack</option>
                    <option value="Weapon">Weapon</option>
                    {{/select}}
                </select>
                <input type="text" name="data.slotOptions.option3.value" value="{{data.slotOptions.option3.value}}" data-dtype="Number" style="width: 30px; text-align: center; font-family: Souvenir-Medium; height: 25px;"/>
            </div>
        </div>

        {{!-- Notes Tab --}}
        <div class="tab notes" data-group="primary" data-tab="notes" style="margin: 5px 0 0 0;">
            {{editor content=data.notes target="data.notes" button=true owner=owner editable=editable}}
        </div>
    </section>
</form>
